<p>    从古至今，javascript ajax跨域问题一直是比较纠结的一个问题，虽然说网上有各种解决方案，包括设置域名，和jsonp方案，但是始终觉得实现起来有点小麻烦，html5出来之后就有一种新的解决方案，简单，粗暴，我喜欢。</p>

<p>到底是怎么回事呢，简单来说就是通过后端发送http头信息来解决前端的跨域操作。在网上搜索了一下这个跨域的头信息，几乎90%的都是：</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>Access-Control-Allow-Origin:<span class="k">*</span>
</code></pre>
</div>

<p>哥一下兴喜万分啊，于是赶紧试了一下，结果发现病没什么卵用，还是提示：</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>XMLHttpRequest cannot load http://www.test.my/cross-domain/post.php.
Request header field X-Requested-With is not allowed by Access-Control-Allow-Headers.
</code></pre>
</div>
<p>显然，跨域是没有成功的。于是赶紧又去google了一下 “javascript 跨域头信息”， 结果发现有有篇博客上有写到需要加上以下头信息</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>Access-Control-Allow-Headers:x-requested-with,content-type
</code></pre>
</div>

<p>测试了以下，果然是可以跨域的，没有问题。下面贴上测试代码</p>

<p><strong>前端代码：</strong></p>

<div class="language-html highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"en"</span><span class="nt">&gt;</span>
<span class="nt">&lt;head&gt;</span>
	<span class="nt">&lt;meta</span> <span class="na">charset=</span><span class="s">"UTF-8"</span><span class="nt">&gt;</span>
	<span class="nt">&lt;title&gt;</span>js跨域请求测试<span class="nt">&lt;/title&gt;</span>

	<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"jquery.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;script&gt;</span>

	<span class="nx">$</span><span class="p">.</span><span class="nx">post</span><span class="p">(</span><span class="s2">"http://www.test.my/cross-domain/post.php"</span><span class="p">,</span> <span class="p">{</span>
		<span class="na">username</span> <span class="p">:</span> <span class="s2">"zhangsan"</span><span class="p">,</span>
		<span class="na">password</span> <span class="p">:</span> <span class="s2">"123456"</span>
	<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
		<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
	<span class="p">},</span>  <span class="s2">"json"</span><span class="p">);</span>

<span class="nt">&lt;/script&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>
</div>

<p><strong>后端代码（别问我为什么用php，因为php是最好的语言O(∩_∩)O~）</strong></p>

<div class="language-php highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?php</span>
<span class="c1">//发送跨域头信息,指定允许其他域名访问
</span><span class="nb">header</span><span class="p">(</span><span class="s1">'Access-Control-Allow-Origin:*'</span><span class="p">);</span>
<span class="c1">// 响应类型,这里可以指定，也可以不指定，不过个人觉得还是指定好一些
</span><span class="nb">header</span><span class="p">(</span><span class="s1">'Access-Control-Allow-Methods:POST'</span><span class="p">);</span>
<span class="c1">// 响应头设置
</span><span class="nb">header</span><span class="p">(</span><span class="s1">'Access-Control-Allow-Headers:x-requested-with,content-type'</span><span class="p">);</span>
<span class="k">echo</span>  <span class="nb">json_encode</span><span class="p">(</span><span class="nv">$_POST</span><span class="p">);</span>

</code></pre>
</div>

<p>浏览器输出的相应</p>

<p>Object {username: “zhangsan”, password: “123456”}</p>
