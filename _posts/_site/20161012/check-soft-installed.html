<p>记得初学linux的时候，到网上去查找”linux如何查询某个软件包是否安装”， 结果出来90%的都是 <code class="scode">rpm -qa</code>, 然后把这条命令在自己的终端敲出来的时候每次都是很遗憾的命名没有找到。后来才知道，原来我使用的是ubuntu发行版，<code class="scode">rpm</code>是centOS的软件包管理机制。Ubuntu 应该使用 dpkg来查询。</p>

<p>在本篇中，让我们看下如何在基于DEB的系统下检查是否安装了一个包。</p>

<p>要查询特定的安装包，比如说vim是否被安装，使用下面这个命令：</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>dpkg -s vim
</code></pre>
</div>
<p>终端输出结果</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>Package: vim
Status: install ok installed
Priority: optional
Section: editors
Installed-Size: 2400
Maintainer: Ubuntu Developers &lt;ubuntu-devel-discuss@lists.ubuntu.com&gt;
Architecture: amd64
Version: 2:7.4.1689-3ubuntu1.1
Provides: editor
Depends: vim-common <span class="o">(=</span> 2:7.4.1689-3ubuntu1.1<span class="o">)</span>, vim-runtime <span class="o">(=</span> 2:7.4.1689-3ubuntu1.1<span class="o">)</span>, libacl1 <span class="o">(</span>&gt;<span class="o">=</span> 2.2.51-8<span class="o">)</span>, libc6 <span class="o">(</span>&gt;<span class="o">=</span> 2.15<span class="o">)</span>, libgpm2 <span class="o">(</span>&gt;<span class="o">=</span> 1.20.4<span class="o">)</span>, libpython3.5 <span class="o">(</span>&gt;<span class="o">=</span> 3.5.0~b1<span class="o">)</span>, libselinux1 <span class="o">(</span>&gt;<span class="o">=</span> 1.32<span class="o">)</span>, libtinfo5 <span class="o">(</span>&gt;<span class="o">=</span> 6<span class="o">)</span>
Suggests: ctags, vim-doc, vim-scripts
Description: Vi IMproved - enhanced vi editor
Vim is an almost compatible version of the UNIX editor Vi.
.
Many new features have been added: multi level undo, syntax
highlighting, <span class="nb">command </span>line <span class="nb">history</span>, on-line <span class="nb">help</span>, filename
completion, block operations, folding, Unicode support, etc.
.
This package contains a version of vim compiled with a rather
standard <span class="nb">set </span>of features.  This package does not provide a GUI
version of Vim.  See the other vim-<span class="k">*</span> packages <span class="k">if </span>you need more
<span class="o">(</span>or less<span class="o">)</span>.
Homepage: http://www.vim.org/
Original-Maintainer: Debian Vim Maintainers &lt;pkg-vim-maintainers@lists.alioth.debian.org&gt;

</code></pre>
</div>
<p>能输出详细的安装信息，则说明你要查询的软件包已经安装了，否则，如果安装包不存在，则会输出如下内容：</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>dpkg-query: package <span class="s1">'vims'</span> is not installed and no information is available
Use dpkg --info <span class="o">(=</span> dpkg-deb --info<span class="o">)</span> to examine archive files,
and dpkg --contents <span class="o">(=</span> dpkg-deb --contents<span class="o">)</span> to list their contents.
</code></pre>
</div>

<p>你还可以使用dpkg-query 命令。这个命令会有一个更好的输出，当然，你可以用通配符</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>dpkg-query -l vim
</code></pre>
</div>

<p>输出结果：</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>
<span class="nv">Desired</span><span class="o">=</span>Unknown/Install/Remove/Purge/Hold
| <span class="nv">Status</span><span class="o">=</span>Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend
|/ Err?<span class="o">=(</span>none<span class="o">)</span>/Reinst-required <span class="o">(</span>Status,Err: <span class="nv">uppercase</span><span class="o">=</span>bad<span class="o">)</span>
<span class="o">||</span>/ Name                     Version           Architecture      Description
+++-<span class="o">========================</span>-<span class="o">=================</span>-<span class="o">=================</span>-<span class="o">=====================================================</span>
ii  vim                      2:7.4.1689-3ubunt amd64             Vi IMproved - enhanced vi editor
</code></pre>
</div>

<p>要列出你系统中安装的所有包，输入下面的命令：</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>dpkg --get-selections
</code></pre>
</div>

<p>输出结果类似：</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>xinit						install
xinput						install
xkb-data					install
xml-core					install
xorg						install
xorg-docs-core					install
xorg-sgml-doctools				install
xserver-common					install
xserver-xorg					install
xserver-xorg-core				install
xserver-xorg-input-all				install
xserver-xorg-input-evdev			install
xserver-xorg-input-synaptics			install
xserver-xorg-input-vmmouse			install
xserver-xorg-input-wacom			install
xserver-xorg-video-all				install
xserver-xorg-video-amdgpu			install
xserver-xorg-video-ati				install
xserver-xorg-video-fbdev			install
xserver-xorg-video-intel			install
xserver-xorg-video-nouveau			install
xserver-xorg-video-qxl				install
xserver-xorg-video-radeon			install
xserver-xorg-video-vesa				install
xserver-xorg-video-vmware			install
xterm						install
xtrans-dev					install
xul-ext-ubufox					install
xz-utils					install
yelp						install
yelp-xsl					install
zeitgeist-core					install
zeitgeist-datahub				install
zenity						install
zenity-common					install
zip						install
</code></pre>
</div>

<p>你同样可以通过grep来过滤割到更精确的包。比如，我想要使用dpkg命令查看系统中安装的gcc包：</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>dpkg --get-selections | grep gcc
</code></pre>
</div>
<p>输出结果类似:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>gcc						install
gcc-5						install
gcc-5-base:amd64				install
gcc-5-base:i386					install
gcc-6-base:amd64				install
gcc-6-base:i386					install
libgcc-5-dev:amd64				install
libgcc1:amd64					install
libgcc1:i386					install
</code></pre>
</div>

<p>此外，你可以使用“-L”参数来找出包中文件的位置。</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>dpkg -L vim
</code></pre>
</div>

<p>输出结果类似：</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>/.
/usr
/usr/bin
/usr/bin/vim.basic
/usr/share
/usr/share/bug
/usr/share/bug/vim
/usr/share/bug/vim/presubj
/usr/share/bug/vim/script
/usr/share/lintian
/usr/share/lintian/overrides
/usr/share/lintian/overrides/vim
/usr/share/doc
/usr/share/doc/vim
</code></pre>
</div>

